<div class= loader *ngIf="loader"></div>
<div *ngIf="!loader">
    <div class="modal-header">
        <h5 class="modal-title">Add Company</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="activeModal.close()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="addCompany">
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <div class="row pt-2">
                        <label class="col-sm-4" for="code">Company Code <span class="text-danger">*</span></label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="code" formControlName="code"
                                placeholder="Enter Company code">
                            <small *ngIf="(code.invalid && (code.touched || code.dirty) )&& code.errors.required"
                                class="text-danger">Code is required.</small>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-6">
                    <div class="row pt-2">
                        <label class="col-sm-4" for="name">Company Name <span class="text-danger">*</span></label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="name" formControlName="name"
                                placeholder="Enter Company Name">
                            <small *ngIf="(name.invalid && (name.touched || name.dirty) )&& name.errors.required"
                                class="text-danger">Company Name is required.</small>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-6">
                    <div class="row ">
                        <label class="col-sm-4" for="ceo">CEO <span class="text-danger">*</span></label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="ceo" formControlName="ceo"
                                placeholder="Enter CEO name">
                            <small *ngIf="(ceo.invalid && (ceo.touched || ceo.dirty) )&& ceo.errors.required"
                                class="text-danger">CEO is required.</small>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-6">
                    <div class="row ">
                        <label class="col-sm-4" for="turnover">Turnover <span class="text-danger">*</span></label>
                        <div class="col-sm-6">
                            <input type="text" class=" form-control" id="turnover" formControlName="turnover"
                                placeholder="Enter Turnover">
                            <small
                                *ngIf="(turnover.invalid && (turnover.touched || turnover.dirty) )&& turnover.errors.required"
                                class="text-danger">Turnover is required.</small>
                            <small *ngIf=" !turnover.errors?.required&&turnover.errors?.pattern"
                                class="text-danger">Turn Over should be number
                            </small>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-6">
                    <div class="row ">
                        <label class="col-sm-4" for="website">Website <span class="text-danger">*</span></label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="website" formControlName="website"
                                placeholder="Enter Website">
                            <small
                                *ngIf="(website.invalid && (website.touched || website.dirty) )&& website.errors.required"
                                class="text-danger">Website is required.</small>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="border border-1 col-sm-12">
            <form [formGroup]="stockPriceForm" *ngIf="stockExchangeList!=''">
                <div class="form-row pt-2">
                    <div class="form-group col-sm-5">
                        <div class="row ">
                            <label class="col-sm-5" for="stockExchangeCode">Stock Exchange <span
                                    class="text-danger">*</span></label>
                            <div class="col-sm-7">
                                <select type="text" class=" form-control" id="stockExchangeCode"
                                    formControlName="stockExchangeCode">
                                   
                                    <option value="null">---Select---</option>
                                    <option  *ngFor="let ex of stockExchangeList" [value]="ex?.code">
                                        {{ex?.name}}
                                    </option>
                                </select>
                                <small
                                    *ngIf="(stockExchangeCode.invalid && (stockExchangeCode.touched || stockExchangeCode.dirty) )&& stockExchangeCode.errors.required"
                                    class="text-danger">Stock Exchange Code required.</small>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-sm-5">
                        <div class="row ">
                            <label class="col-sm-4" for="stockPrice">Stock Price <span
                                    class="text-danger">*</span></label>
                            <div class="col-sm-8">
                                <input type="text" class="col-sm-10 form-control" id="stockPrice"
                                    formControlName="stockPrice" placeholder="Enter Stock Price">
                                <small
                                    *ngIf="(stockPrice.invalid && (stockPrice.touched || stockPrice.dirty) )&& stockPrice.errors.required"
                                    class="text-danger">Stock Price is required.</small>
                                <small *ngIf=" !stockPrice.errors?.required&&stockPrice.errors?.pattern"
                                    class="text-danger">Enter valid stock price
                                </small>
                            </div>
                        </div>

                    </div>
                    <div class="form-group col-sm-2">
                        <button type="button" (click)="onAddStockPrice()" class="btn btn-primary">Add</button>
                    </div>
                </div>
            </form>
            <div class="container col-sm-9 pt-2">
                <table *ngIf="stockPriceList.length > 0" class="table border overflow-auto p-2">
                    <thead>
                        <th>Stock Exchange</th>
                        <th>Stock Price</th>
                    </thead>
                    <tbody *ngFor="let stock of stockPriceList">
                        <td>{{stock.stockExchangeCode}}</td>
                        <td>{{stock.stockPrice}}</td>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="text-danger text-center" *ngIf="errorMsg != ''">{{errorMsg}}</div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal"
            (click)="activeModal.close()">Close</button>
        <button type="button" class="btn btn-primary" (click)="onSubmit()">Submit</button>
    </div>
</div>